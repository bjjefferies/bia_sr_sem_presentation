knitr::opts_chunk$set(echo = TRUE)
install.packages("xray")
install.packages("Rtools")
install.packages("rtools")
install.packages("rtools45")
install.packages("tidyverse")
library(tidyverse)
library(xray)
library(readr)
library(readxl)
library(here)
install.packages("here")
library(here)
list.files(path = here())
local_files <- list.files(path = here())
# restrict list of local files to those ending in .xlsx
local_files
# restrict list of local files to those ending in .xlsx
local_files <- local_files[grepl(pattern = ".xlsx$")]
# restrict list of local files to those ending in .xlsx
local_files <- local_files[grepl(pattern = ".xlsx$", x = local_files)]
dat <- readxl::read_xlsx(here(local_files))
#find local files
local_files <- list.files(path = here())
# restrict list of local files to those ending in .xlsx
local_files <- local_files[grepl(pattern = ".xlsx$", x = local_files)]
# read in to dat
dat <- readxl::read_xlsx(here(local_files))
head(dat)
knitr::opts_chunk$set(echo = TRUE)
xray::distributions(dat)
head(dat)
install.packages("janitor")
library(janitor)
dat <- janitor::clean_names(dat)
unique(dat$accept_date)
accept_date <- dat %>%
select(accept_date) %>%
mutate(accept_date = as.Date.POSIXct(accept_date))
library(tidyverse)
library(xray)
library(readr)
library(readxl)
library(here)
library(janitor)
accept_date <- dat %>%
select(accept_date) %>%
mutate(accept_date = as.Date.POSIXct(accept_date))
head(accept_date)
accept_date <- dat %>%
select(accept_date) %>%
mutate(accept_date = as.Date.POSIXct('1900-01-01' + accept_date))
accept_date <- dat %>%
select(accept_date) %>%
mutate(accept_date = as.Date(accept_date, origin = "1899-12-30"))
head(accept_date)
dat <- dat %>%
mutate(accept_date = as.Date(accept_date, origin = "1899-12-30"))
head(accept_date)
head(dat)
xray::distributions(dat)
```{r warning=FALSE}
xray::distributions(dat)
dat <- dat %>%
mutate(accept_time_elapsed = accept_date - admit_date)
dat <- dat %>%
mutate(accept_time_elapsed = accept_date - as.Date(admit_date))
head(dat)
View(dat)
rm(accept_date)
dat <- dat %>%
mutate(accept_time_elapsed = as.numeric(accept_date - as.Date(admit_date)))
dat %>%
summarize(avg_accept_time = mean(accept_time_elapsed, na.rm = t))
dat %>%
summarize(avg_accept_time = mean(accept_time_elapsed, na.rm = T))
dat %>%
group_by(residency) %>%
summarize(avg_accept_time = mean(accept_time_elapsed, na.rm = T))
dat %>%
group_by(residency, ipeds_ethnicity) %>%
summarize(avg_accept_time = mean(accept_time_elapsed, na.rm = T))
attach(dat)
lm_aid_accept_time <- lm(formula = dat$accept_time_elapsed ~ dat$offered_aid_amount,
data = dat,
subset = !is.na(dat$accept_date))
summary(lm_aid_accept_time)
dettach(dat)
detach(dat)
summary(lm_aid_accept_time)
lm_aid_accept_time$coefficients
lm_aid_accept_time$coefficients[2]
lm_aid_accept_time$coefficients[2] * 1000
dat_accepted <- dat[ !is.na(dat$accept_date), ]
plot(x = dat_accepted$accept_time_elapsed, y = dat_accepted$offered_aid_amount)
dat %>%
filter(accept_time_elapsed <= 0)
# convert all NA's in offered aid to $0
dat <- dat %>%
mutate(offered_aid_amount = ifelse(is.na(offered_aid_amount), 0, offered_aid_amount))
# convert all NA's in offered aid to $0
dat <- dat %>%
mutate(offered_aid_amount = round( ifelse(is.na(offered_aid_amount), 0, offered_aid_amount), 0))
lm_aid_accept_time <- lm(formula = dat$accept_time_elapsed ~ dat$offered_aid_amount,
data = dat,
subset = !is.na(dat$accept_date))
summary(lm_aid_accept_time)
lm_aid_accept_time$coefficients[2] * 1000
dat_accepted <- dat[ !is.na(dat$accept_date), ]
plot(x = dat_accepted$accept_time_elapsed, y = dat_accepted$offered_aid_amount)
